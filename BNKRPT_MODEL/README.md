# Описание программного пакета модели микроуровнего тестирования (банкротства застройщиков)

Модель определяет вероятность банкротства для каждой компании-застройщика по годам.

## Структура 

Все блокноты модели лежат в каталоге AIGK/BNKRPT_MODEL
База даных модели: AIGK/DB/bankrp.sqlite3
Исходные данные для базы данных и 
промежуточных моделей - в каталоге AIGK/DB/SRC

Модель обрана на следующих блокнотах (jupyter notebook):
- <a href="bankrupt_prob.ipynb" 
target="_blank">baknkrutp_prob.ipynb</a> - блокнот расчета основной модели
- <a href="bankrupt_prob_prepare.ipynb" 
target="_blank">bankrupt_prob_prepare.ipynb</a> - блокнот расчета 
промежуточных моделей и формирования фрейма данных для основной модели. 
- <a href="bankrupt_prob_DB.ipynb" 
target="_blank">bankrupt_prob_DB.ipynb</a> - блокнот обновления 
(создания) базы данных модели из различных источников 
- <a href="bankrpt_test.ipynb" 
target="_blank">bankrpt_test.ipynb</a> - блокнот проверок и 
тестирования моделей на разных стадиях.
- README.ipynb - вывод справки readme.

Используются следующие файлы с данными:
- AIGK/DB/bankrp.sqlite3 (основная база данных)
- AIGK/DB/year.sqlite3 (долгосрочная модель - факт)
- AIGK/DB/SRC/Долгосрочная модель.xlsx (долгосрочная модель - прогноз)
- AIGK/DB/SRC/SPARK.xlsx (показатели компаний)
- AIGK/DB/SRC/Bnk_graphics.xlsx (фактические флаги банкротств)

Используются следующие источники данных:
- <a 
href="http://cbr.ru/statistics/bank_sector/" 
target="_blank">http://cbr.ru/statistics/bank_sector/</a> - ссуды 
и резервы (lending  lending_reserv)
- <a href="http://cbr.ru/statistics/bank_sector/int_rat/" 
target="_blank">http://cbr.ru/statistics/bank_sector/int_rat/</a> - 
кредиты нефинансовым организациям (loan)

## Алгоритм работы с моделью 

При поступлении новых данных в 
источниках выполняется блокнот 
**baknkrutp_prob_DB.ipynb**. При этом неокторые 
данные недоступны для программного 
считывания напрямую, файлы с данными 
должны быть скачаны вручную и 
размещеные в соотв. каталоге. Рабочий 
блокнот выбирает нужные для работы 
данные, формирует таблицы данных в 
нужных форматах и сохраняет их в файле базы данных модели.  
*Входные данные*: файлы или 
интернет-ресурсы с "сырыми" данными от 
поставщиков (источников) данных.   
*Выходные данные* - файл базы данных модели (AIGK/DB/bankrp.sqlite3) 

Блокнот **baknkrutp_prob_prepare.ipynb** выполняется 
для оценки и пересчета промежуточных 
моделей. Так же в этом блокноте 
формируется фрейм для работы основной 
модели - данные продлеваются на 
прогнозный период, пропуски 
заполняются, остутсвующие данные 
удаляется. Готовый фрейм сохраняется в 
виде таблицы в файле базы данных модели.   
*Входные данные* - файл базы данных 
модели (AIGK/DB/bankrp.sqlite3) и файлы долгосрочной модели ЦМАКП.   
*Выходные данные* - файл базы данных модели (AIGK/DB/bankrp.sqlite3) 

Блокнот **baknkrutp_prob.ipynb** выполняется для 
оценки и расчета основной модели "Банкротства застройщиков".   
*Входные данные* - файл базы данных 
модели (AIGK/DB/bankrp.sqlite3).   
*Выходные данные* - файл базы данных модели (AIGK/DB/bankrp.sqlite3) 
